function cov_27qorzbf7g(){var path="C:\\Users\\Karthikbharh\\Documents\\Learnings\\Nodejs\\fileUploader\\index.js";var hash="44aa378267a44aa9b96ae52cab886773aae95f10";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Karthikbharh\\Documents\\Learnings\\Nodejs\\fileUploader\\index.js",statementMap:{"0":{start:{line:2,column:16},end:{line:2,column:34}},"1":{start:{line:3,column:15},end:{line:3,column:32}},"2":{start:{line:4,column:13},end:{line:4,column:28}},"3":{start:{line:5,column:11},end:{line:5,column:24}},"4":{start:{line:7,column:12},end:{line:7,column:21}},"5":{start:{line:10,column:0},end:{line:10,column:48}},"6":{start:{line:11,column:0},end:{line:11,column:30}},"7":{start:{line:14,column:16},end:{line:22,column:2}},"8":{start:{line:16,column:4},end:{line:16,column:25}},"9":{start:{line:19,column:25},end:{line:19,column:75}},"10":{start:{line:20,column:4},end:{line:20,column:84}},"11":{start:{line:24,column:15},end:{line:24,column:34}},"12":{start:{line:27,column:0},end:{line:29,column:3}},"13":{start:{line:28,column:2},end:{line:28,column:22}},"14":{start:{line:32,column:0},end:{line:38,column:3}},"15":{start:{line:33,column:2},end:{line:35,column:3}},"16":{start:{line:34,column:4},end:{line:34,column:63}},"17":{start:{line:37,column:2},end:{line:37,column:83}},"18":{start:{line:41,column:13},end:{line:41,column:17}},"19":{start:{line:42,column:0},end:{line:44,column:3}},"20":{start:{line:43,column:2},end:{line:43,column:51}},"21":{start:{line:46,column:0},end:{line:51,column:1}},"22":{start:{line:47,column:15},end:{line:47,column:19}},"23":{start:{line:48,column:2},end:{line:50,column:5}},"24":{start:{line:49,column:4},end:{line:49,column:53}},"25":{start:{line:53,column:0},end:{line:53,column:21}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:15},end:{line:15,column:16}},loc:{start:{line:15,column:34},end:{line:17,column:3}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:12},end:{line:18,column:13}},loc:{start:{line:18,column:31},end:{line:21,column:3}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:27},end:{line:29,column:1}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:43},end:{line:32,column:44}},loc:{start:{line:32,column:57},end:{line:38,column:1}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:42,column:17},end:{line:42,column:18}},loc:{start:{line:42,column:23},end:{line:44,column:1}},line:42},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:19},end:{line:48,column:20}},loc:{start:{line:48,column:25},end:{line:50,column:3}},line:48}},branchMap:{"0":{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:33,column:2},end:{line:35,column:3}}],line:33},"1":{loc:{start:{line:46,column:0},end:{line:51,column:1}},type:"if",locations:[{start:{line:46,column:0},end:{line:51,column:1}},{start:{line:46,column:0},end:{line:51,column:1}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"44aa378267a44aa9b96ae52cab886773aae95f10"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_27qorzbf7g=function(){return actualCoverage;};}return actualCoverage;}cov_27qorzbf7g();//using multer for uploading files
const express=(cov_27qorzbf7g().s[0]++,require('express'));const multer=(cov_27qorzbf7g().s[1]++,require('multer'));const path=(cov_27qorzbf7g().s[2]++,require('path'));const fs=(cov_27qorzbf7g().s[3]++,require('fs'));const app=(cov_27qorzbf7g().s[4]++,express());// Set 'views' directory for EJS templates
cov_27qorzbf7g().s[5]++;app.set('views',path.join(__dirname,'views'));cov_27qorzbf7g().s[6]++;app.set('view engine','ejs');// Set up multer for file upload
const storage=(cov_27qorzbf7g().s[7]++,multer.diskStorage({destination:(req,file,cb)=>{cov_27qorzbf7g().f[0]++;cov_27qorzbf7g().s[8]++;cb(null,'uploads/');},filename:(req,file,cb)=>{cov_27qorzbf7g().f[1]++;const uniqueSuffix=(cov_27qorzbf7g().s[9]++,Date.now()+'-'+Math.round(Math.random()*1e9));cov_27qorzbf7g().s[10]++;cb(null,file.fieldname+'-'+uniqueSuffix+path.extname(file.originalname));}}));const upload=(cov_27qorzbf7g().s[11]++,multer({storage}));// Serve the EJS form for file upload
cov_27qorzbf7g().s[12]++;app.get('/',(req,res)=>{cov_27qorzbf7g().f[2]++;cov_27qorzbf7g().s[13]++;res.render('index');});// Handle the file upload
cov_27qorzbf7g().s[14]++;app.post('/upload',upload.single('file'),(req,res)=>{cov_27qorzbf7g().f[3]++;cov_27qorzbf7g().s[15]++;if(!req.file){cov_27qorzbf7g().b[0][0]++;cov_27qorzbf7g().s[16]++;return res.status(400).json({error:'No file uploaded'});}else{cov_27qorzbf7g().b[0][1]++;}cov_27qorzbf7g().s[17]++;res.json({message:'File uploaded successfully',filename:req.file.filename});});// Start the server
const port=(cov_27qorzbf7g().s[18]++,3000);cov_27qorzbf7g().s[19]++;app.listen(port,()=>{cov_27qorzbf7g().f[4]++;cov_27qorzbf7g().s[20]++;console.log(`Server is running on port ${port}`);});cov_27qorzbf7g().s[21]++;if(require.main===module){cov_27qorzbf7g().b[1][0]++;const port=(cov_27qorzbf7g().s[22]++,3000);cov_27qorzbf7g().s[23]++;app.listen(port,()=>{cov_27qorzbf7g().f[5]++;cov_27qorzbf7g().s[24]++;console.log(`Server is running on port ${port}`);});}else{cov_27qorzbf7g().b[1][1]++;}cov_27qorzbf7g().s[25]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjdxb3J6YmY3ZyIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwibXVsdGVyIiwicGF0aCIsImZzIiwiYXBwIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZiIsImZpbGVuYW1lIiwidW5pcXVlU3VmZml4IiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImZpZWxkbmFtZSIsImV4dG5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWQiLCJnZXQiLCJyZXMiLCJyZW5kZXIiLCJwb3N0Iiwic2luZ2xlIiwiYiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJwb3J0IiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsIm1haW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy91c2luZyBtdWx0ZXIgZm9yIHVwbG9hZGluZyBmaWxlc1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBtdWx0ZXIgPSByZXF1aXJlKCdtdWx0ZXInKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gU2V0ICd2aWV3cycgZGlyZWN0b3J5IGZvciBFSlMgdGVtcGxhdGVzXHJcbmFwcC5zZXQoJ3ZpZXdzJywgcGF0aC5qb2luKF9fZGlybmFtZSwgJ3ZpZXdzJykpO1xyXG5hcHAuc2V0KCd2aWV3IGVuZ2luZScsICdlanMnKTtcclxuXHJcbi8vIFNldCB1cCBtdWx0ZXIgZm9yIGZpbGUgdXBsb2FkXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xyXG4gIGRlc3RpbmF0aW9uOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY2IobnVsbCwgJ3VwbG9hZHMvJyk7XHJcbiAgfSxcclxuICBmaWxlbmFtZTogKHJlcSwgZmlsZSwgY2IpID0+IHtcclxuICAgIGNvbnN0IHVuaXF1ZVN1ZmZpeCA9IERhdGUubm93KCkgKyAnLScgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxZTkpO1xyXG4gICAgY2IobnVsbCwgZmlsZS5maWVsZG5hbWUgKyAnLScgKyB1bmlxdWVTdWZmaXggKyBwYXRoLmV4dG5hbWUoZmlsZS5vcmlnaW5hbG5hbWUpKTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7IHN0b3JhZ2UgfSk7XHJcblxyXG4vLyBTZXJ2ZSB0aGUgRUpTIGZvcm0gZm9yIGZpbGUgdXBsb2FkXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICByZXMucmVuZGVyKCdpbmRleCcpO1xyXG59KTtcclxuXHJcbi8vIEhhbmRsZSB0aGUgZmlsZSB1cGxvYWRcclxuYXBwLnBvc3QoJy91cGxvYWQnLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIChyZXEsIHJlcykgPT4ge1xyXG4gIGlmICghcmVxLmZpbGUpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTm8gZmlsZSB1cGxvYWRlZCcgfSk7XHJcbiAgfVxyXG5cclxuICByZXMuanNvbih7IG1lc3NhZ2U6ICdGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScsIGZpbGVuYW1lOiByZXEuZmlsZS5maWxlbmFtZSB9KTtcclxufSk7XHJcblxyXG4vLyBTdGFydCB0aGUgc2VydmVyXHJcbmNvbnN0IHBvcnQgPSAzMDAwO1xyXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcclxuICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7XHJcbn0pO1xyXG5cclxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XHJcbiAgY29uc3QgcG9ydCA9IDMwMDA7XHJcbiAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXBwOyJdLCJtYXBwaW5ncyI6InEvR0FlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWjtBQUNBLEtBQU0sQ0FBQUUsT0FBTyxFQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUNsQyxLQUFNLENBQUFDLE1BQU0sRUFBQUwsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFDaEMsS0FBTSxDQUFBRSxJQUFJLEVBQUFOLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQzVCLEtBQU0sQ0FBQUcsRUFBRSxFQUFBUCxjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUV4QixLQUFNLENBQUFJLEdBQUcsRUFBQVIsY0FBQSxHQUFBRyxDQUFBLE1BQUdELE9BQU8sQ0FBQyxDQUFDLEVBRXJCO0FBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUNBSyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxPQUFPLENBQUVILElBQUksQ0FBQ0ksSUFBSSxDQUFDQyxTQUFTLENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQ1gsY0FBQSxHQUFBRyxDQUFBLE1BQ2hESyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxhQUFhLENBQUUsS0FBSyxDQUFDLENBRTdCO0FBQ0EsS0FBTSxDQUFBRyxPQUFPLEVBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUFHRSxNQUFNLENBQUNRLFdBQVcsQ0FBQyxDQUNqQ0MsV0FBVyxDQUFFQSxDQUFDQyxHQUFHLENBQUVDLElBQUksQ0FBRUMsRUFBRSxH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