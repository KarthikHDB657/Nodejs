function cov_27qorzbf7g(){var path="C:\\Users\\Karthikbharh\\Documents\\Learnings\\Nodejs\\fileUploader\\index.js";var hash="a61647e7a320411b4a584288f3282b18fa4cc06d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Karthikbharh\\Documents\\Learnings\\Nodejs\\fileUploader\\index.js",statementMap:{"0":{start:{line:2,column:16},end:{line:2,column:34}},"1":{start:{line:3,column:15},end:{line:3,column:32}},"2":{start:{line:4,column:13},end:{line:4,column:28}},"3":{start:{line:5,column:11},end:{line:5,column:24}},"4":{start:{line:7,column:12},end:{line:7,column:21}},"5":{start:{line:10,column:0},end:{line:10,column:48}},"6":{start:{line:11,column:0},end:{line:11,column:30}},"7":{start:{line:14,column:16},end:{line:22,column:2}},"8":{start:{line:16,column:4},end:{line:16,column:25}},"9":{start:{line:19,column:25},end:{line:19,column:75}},"10":{start:{line:20,column:4},end:{line:20,column:84}},"11":{start:{line:24,column:15},end:{line:24,column:34}},"12":{start:{line:27,column:0},end:{line:29,column:3}},"13":{start:{line:28,column:2},end:{line:28,column:22}},"14":{start:{line:32,column:0},end:{line:38,column:3}},"15":{start:{line:33,column:2},end:{line:35,column:3}},"16":{start:{line:34,column:4},end:{line:34,column:63}},"17":{start:{line:37,column:2},end:{line:37,column:83}},"18":{start:{line:41,column:13},end:{line:41,column:17}},"19":{start:{line:42,column:0},end:{line:44,column:3}},"20":{start:{line:43,column:2},end:{line:43,column:51}},"21":{start:{line:46,column:0},end:{line:51,column:1}},"22":{start:{line:47,column:15},end:{line:47,column:19}},"23":{start:{line:48,column:2},end:{line:50,column:5}},"24":{start:{line:49,column:4},end:{line:49,column:53}},"25":{start:{line:53,column:0},end:{line:53,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:15,column:15},end:{line:15,column:16}},loc:{start:{line:15,column:34},end:{line:17,column:3}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:12},end:{line:18,column:13}},loc:{start:{line:18,column:31},end:{line:21,column:3}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:13},end:{line:27,column:14}},loc:{start:{line:27,column:27},end:{line:29,column:1}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:32,column:43},end:{line:32,column:44}},loc:{start:{line:32,column:57},end:{line:38,column:1}},line:32},"4":{name:"(anonymous_4)",decl:{start:{line:42,column:17},end:{line:42,column:18}},loc:{start:{line:42,column:23},end:{line:44,column:1}},line:42},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:19},end:{line:48,column:20}},loc:{start:{line:48,column:25},end:{line:50,column:3}},line:48}},branchMap:{"0":{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:33,column:2},end:{line:35,column:3}}],line:33},"1":{loc:{start:{line:46,column:0},end:{line:51,column:1}},type:"if",locations:[{start:{line:46,column:0},end:{line:51,column:1}},{start:{line:46,column:0},end:{line:51,column:1}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a61647e7a320411b4a584288f3282b18fa4cc06d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_27qorzbf7g=function(){return actualCoverage;};}return actualCoverage;}cov_27qorzbf7g();//using multer for uploading files
const express=(cov_27qorzbf7g().s[0]++,require('express'));const multer=(cov_27qorzbf7g().s[1]++,require('multer'));const path=(cov_27qorzbf7g().s[2]++,require('path'));const fs=(cov_27qorzbf7g().s[3]++,require('fs'));const app=(cov_27qorzbf7g().s[4]++,express());// Set 'views' directory for EJS templates
cov_27qorzbf7g().s[5]++;app.set('views',path.join(__dirname,'views'));cov_27qorzbf7g().s[6]++;app.set('view engine','ejs');// Set up multer for file upload
const storage=(cov_27qorzbf7g().s[7]++,multer.diskStorage({destination:(req,file,cb)=>{cov_27qorzbf7g().f[0]++;cov_27qorzbf7g().s[8]++;cb(null,'uploads/');},filename:(req,file,cb)=>{cov_27qorzbf7g().f[1]++;const uniqueSuffix=(cov_27qorzbf7g().s[9]++,Date.now()+'-'+Math.round(Math.random()*1e9));cov_27qorzbf7g().s[10]++;cb(null,file.fieldname+'-'+uniqueSuffix+path.extname(file.originalname));}}));const upload=(cov_27qorzbf7g().s[11]++,multer({storage}));// Serve the EJS form for file upload
cov_27qorzbf7g().s[12]++;app.get('/',(req,res)=>{cov_27qorzbf7g().f[2]++;cov_27qorzbf7g().s[13]++;res.render('index');});// Handle the file upload
cov_27qorzbf7g().s[14]++;app.post('/upload',upload.single('file'),(req,res)=>{cov_27qorzbf7g().f[3]++;cov_27qorzbf7g().s[15]++;if(!req.file){cov_27qorzbf7g().b[0][0]++;cov_27qorzbf7g().s[16]++;return res.status(400).json({error:'No file uploaded'});}else{cov_27qorzbf7g().b[0][1]++;}cov_27qorzbf7g().s[17]++;res.json({message:'File uploaded successfully',filename:req.file.filename});});// Start the server
const port=(cov_27qorzbf7g().s[18]++,3000);cov_27qorzbf7g().s[19]++;app.listen(port,()=>{cov_27qorzbf7g().f[4]++;cov_27qorzbf7g().s[20]++;console.log(`Server is running on port ${port}`);});cov_27qorzbf7g().s[21]++;if(require.main===module){cov_27qorzbf7g().b[1][0]++;const port=(cov_27qorzbf7g().s[22]++,3000);cov_27qorzbf7g().s[23]++;app.listen(port,()=>{cov_27qorzbf7g().f[5]++;cov_27qorzbf7g().s[24]++;console.log(`Server is running on port ${port}`);});}else{cov_27qorzbf7g().b[1][1]++;}cov_27qorzbf7g().s[25]++;module.exports=index;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjdxb3J6YmY3ZyIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwibXVsdGVyIiwicGF0aCIsImZzIiwiYXBwIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsInN0b3JhZ2UiLCJkaXNrU3RvcmFnZSIsImRlc3RpbmF0aW9uIiwicmVxIiwiZmlsZSIsImNiIiwiZiIsImZpbGVuYW1lIiwidW5pcXVlU3VmZml4IiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImZpZWxkbmFtZSIsImV4dG5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWQiLCJnZXQiLCJyZXMiLCJyZW5kZXIiLCJwb3N0Iiwic2luZ2xlIiwiYiIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1lc3NhZ2UiLCJwb3J0IiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsIm1haW4iLCJtb2R1bGUiLCJleHBvcnRzIiwiaW5kZXgiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL3VzaW5nIG11bHRlciBmb3IgdXBsb2FkaW5nIGZpbGVzXHJcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG4vLyBTZXQgJ3ZpZXdzJyBkaXJlY3RvcnkgZm9yIEVKUyB0ZW1wbGF0ZXNcclxuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAndmlld3MnKSk7XHJcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2VqcycpO1xyXG5cclxuLy8gU2V0IHVwIG11bHRlciBmb3IgZmlsZSB1cGxvYWRcclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCAndXBsb2Fkcy8nKTtcclxuICB9LFxyXG4gIGZpbGVuYW1lOiAocmVxLCBmaWxlLCBjYikgPT4ge1xyXG4gICAgY29uc3QgdW5pcXVlU3VmZml4ID0gRGF0ZS5ub3coKSArICctJyArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDFlOSk7XHJcbiAgICBjYihudWxsLCBmaWxlLmZpZWxkbmFtZSArICctJyArIHVuaXF1ZVN1ZmZpeCArIHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSkpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuXHJcbi8vIFNlcnZlIHRoZSBFSlMgZm9ybSBmb3IgZmlsZSB1cGxvYWRcclxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJlcy5yZW5kZXIoJ2luZGV4Jyk7XHJcbn0pO1xyXG5cclxuLy8gSGFuZGxlIHRoZSBmaWxlIHVwbG9hZFxyXG5hcHAucG9zdCgnL3VwbG9hZCcsIHVwbG9hZC5zaW5nbGUoJ2ZpbGUnKSwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgaWYgKCFyZXEuZmlsZSkge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdObyBmaWxlIHVwbG9hZGVkJyB9KTtcclxuICB9XHJcblxyXG4gIHJlcy5qc29uKHsgbWVzc2FnZTogJ0ZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5JywgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lIH0pO1xyXG59KTtcclxuXHJcbi8vIFN0YXJ0IHRoZSBzZXJ2ZXJcclxuY29uc3QgcG9ydCA9IDMwMDA7XHJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBvbiBwb3J0ICR7cG9ydH1gKTtcclxufSk7XHJcblxyXG5pZiAocmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcclxuICBjb25zdCBwb3J0ID0gMzAwMDtcclxuICBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgaXMgcnVubmluZyBvbiBwb3J0ICR7cG9ydH1gKTtcclxuICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBpbmRleDsiXSwibWFwcGluZ3MiOiJxL0dBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlo7QUFDQSxLQUFNLENBQUFFLE9BQU8sRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFDbEMsS0FBTSxDQUFBQyxNQUFNLEVBQUFMLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQ2hDLEtBQU0sQ0FBQUUsSUFBSSxFQUFBTixjQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUM1QixLQUFNLENBQUFHLEVBQUUsRUFBQVAsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFFeEIsS0FBTSxDQUFBSSxHQUFHLEVBQUFSLGNBQUEsR0FBQUcsQ0FBQSxNQUFHRCxPQUFPLENBQUMsQ0FBQyxFQUVyQjtBQUFBRixjQUFBLEdBQUFHLENBQUEsTUFDQUssR0FBRyxDQUFDQyxHQUFHLENBQUMsT0FBTyxDQUFFSCxJQUFJLENBQUNJLElBQUksQ0FBQ0MsU0FBUyxDQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUNYLGNBQUEsR0FBQUcsQ0FBQSxNQUNoREssR0FBRyxDQUFDQyxHQUFHLENBQUMsYUFBYSxDQUFFLEtBQUssQ0FBQyxDQUU3QjtBQUNBLEtBQU0sQ0FBQUcsT0FBTyxFQUFBWixjQUFBLEdBQUFHLENBQUEsTUFBR0UsTUFBTSxDQUFDUSxXQUFXLENBQUMsQ0FDakNDLFdBQVcsQ0FBRUEsQ0FBQ0MsR0FBRyxDQUFFQyxJQUFJLENB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